{% extends "main.html" %}
{% autoescape None %}

{% block body %}


<br>

<section class="section">
	
	<div class="container has-text-centered">
		
		{# <h3 class="title">
			Data structure overview
			<div class="has-text-weight-light"> {% module MainTabs() %}</div>
		</h3> #}


		{# <h5 class="subtitle">
			this is the data model you are using, the names of the columns of your data set. 
			<br>You can modify the custom fields clicking on "edit data model"
		</h5> #}


		<div class="dropdown is-hoverable">
			
			<div class="dropdown-trigger"> 
				
				<button class="button is-large is-rounded" aria-haspopup="true" aria-controls="dropdown-menu-datamodel">
					<span>
						<b>Data structure overview</b>  
					</span>
				</button>
				
				<button class="button  is-text" aria-haspopup="true" aria-controls="dropdown-menu-datamodel">
					<span class="icon">
						<i class="fas fa-question-circle"></i>
					</span>
				</button>
				
				{# tabs #}
				<div class="has-text-weight-light"> {% module MainTabs(site_section) %}</div>
			
			</div>

			<div class="dropdown-menu" id="dropdown-menu-datamodel" role="menu">
			<div class="dropdown-content">
				<div class="dropdown-item">
					<p>
						this is the <b>data model</b> you are using : you set here the names of the columns of your data set. 
						You can modify the custom fields clicking on <a href="/datamodel/edit">"edit data model"</a>
					</p>
				</div>
			</div>
			</div>

		</div>


		<br><br>


		<div>
			<a class="button is-primary is-rounded"
				href="/datamodel/edit" >
				<span class="icon is-small"><i class="fas fa-list"></i></span>
				<span>edit data model</span>		
			</a>
		</div>


		<hr>

	</div>


	<div class="container">

		<div class="columns is-centered">
			

			<div class="column is-8">

				<table id="t_datamodel" class="table display" width="100%" cellspacing="0">
					<thead>
						<tr>
							<th>Field Name</th>
							<th>Field Type</th>
							<th>Open level</th>
							<th>added by</th>
							<th>Field Class</th>
							<th>Visible</th>
							<th>Field ID</th>
						</tr>
					</thead>

					{# displaying data #}
					<tbody>

					{% for field in datamodel_custom %}
						{# { % if field["is_visible"]==True % } #}
						<tr >
							<th> {{ escape (field["field_name"]) }} </th>
							<td> {{ escape (field["field_type"]) }} </td>
							<td> {{ escape (field["field_open"]) }}</td>
							<td> {{ escape (field["added_by"]) }} </td>
							<td> {{ escape (field["field_class"]) }} field</td>
							<td> {% if field["is_visible"] %}yes{% else %}no{% end %} </td>
							<td> {{ escape (str(field["_id"])) }} </td>
						</tr>
						{# { % end % } #}
					{% end %}

					{% for field in datamodel_core %}
						{% if field["is_visible"]==True %}
						<tr >
							<td> {{ escape (field["field_name"]) }} </td>
							<td> {{ escape (field["field_type"]) }} </td>
							<td> {{ escape (field["field_open"]) }}</td>
							<td> {{ escape (field["added_by"]) }} </td>
							<td> {{ escape (field["field_class"]) }} field</td>
							<td> {% if field["is_visible"] %}yes{% else %}no{% end %} </td>
							<td> {{ escape (str(field["_id"])) }} </td>
						</tr>
						{% end %}
					{% end %}

					</tbody>

					{# <tfoot>
						<tr>
							<th>Field Name</th>
							<th>Object ID</th>
						</tr>
					</tfoot> #}


				</table>

			</div>
		</div>


	</div>


	{# <div class="container has-text-centered">
		<a class="button is-primary is-rounded">
			<span class="icon is-small"><i class="fas fa-check"></i></span>
			<span>save changes</span>		
		</a>
	</div> #}


</section>


{% end %}
