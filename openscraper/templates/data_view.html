{% extends "main.html" %}
{% autoescape None %}

{% block body %}


<br>
<section class="section">
	
	<br>

	<div class="container has-text-centered">
		<h1 class="title">
			Data set overview
		</h1>
		<h2 class="subtitle">
			this is the data you have scraped so far (add search engine here)
		</h2>
	</div>

	<br>



	<div class="container">

		{% if is_data %}

		<div class="columns is-centered">
			<div class="column is-half">
				{% module Pagination( pagination_dict ) %}
			</div>
		</div>

		<div class="columns is-centered">
			
			<div class="column">

				{# data #}
				<table id="t_dataset" class="table display" width="100%" cellspacing="0">
					<thead>
						<tr>
							<th>link_src</th>
							
							<th>spider used</th>
							
							{% for field in datamodel_custom %}
								<th>{{ field["field_name"] }}</th>
							{% end %}

						</tr>
					</thead>

					{# displaying data if there is ... #}
					<tbody>

						{% for item in items %}

							<tr >

								<th> {{ escape (
									item["link_src"]
									) }} 
								</th>

								<td> 
									<a href="/contributors" >
										{{ escape (item["spider_name"]) }} 
									</a>
								</td>
								
								{% for field in datamodel_custom %}
									{% set id_f = str(field[u"_id"]) %}

									{% if id_f in item.keys() %}
										<td>
											{% for i in item[ id_f ]  %} 
											{{ escape (i) }} 
											{% end %}
										</td>
										{# <td>{ { id_f }}</td> #}
									{% else %}
										<td> - </td>
									{% end %}

								{% end %}

							</tr>

						{% end %}


					</tbody>


				</table>

			</div>
		
		</div>

		{% else %}
			
		<br><hr>
		<div class="container has-text-centered">
			<p class="is-centered"> no results </p>
		</div>
		<br>
			
		{% end %}

	</div>


	
</section>

{% end %}
